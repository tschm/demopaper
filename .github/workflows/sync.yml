# This file is part of the tschm/.config-templates repository
# (https://github.com/tschm/.config-templates).
#
# Workflow: Sync
# Purpose: This workflow synchronizes configuration files from the template repository
#          to other repositories, creating a pull request with the changes.
#
# Trigger: This workflow runs manually via workflow_dispatch
#
# Components:
#   - üì• Checkout the target repository
#   - üîÑ Sync configuration templates
#   - üìù Create a pull request with the changes

name: Sync Files

on:
  workflow_dispatch:
  schedule:
    - cron: '0 0 * * 1'  # Weekly on Monday at midnight

jobs:
  sync:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Repository
        uses: actions/checkout@main
      - name: Run GitHub File Sync
        uses: BetaHuhn/repo-file-sync-action@v1
        with:
          GH_PAT: ${{ secrets.PAT_TOKEN }}

#env:
#  TEMPLATE_REPO: 'tschm/latex'
#  TEMPLATE_BRANCH: 'main'
#  TARGET_BRANCH: 'sync/update'
#jobs:
#  sync:
#    runs-on: ubuntu-latest
#    steps:
#      - name: Checkout the target repo
#        uses: actions/checkout@v5
#        with:
#          token: ${{ secrets.PAT_TOKEN }}
#          fetch-depth: 0
#          persist-credentials: 'false'
#
#      - name: Sync Template
#        id: sync
#        uses: jebel-quant/sync_template@main
#        with:
#          token: ${{ secrets.PAT_TOKEN }}
#          template-repository: ${{ env.TEMPLATE_REPO }}
#          template-branch: ${{ env.TEMPLATE_BRANCH }}
#          branch: ${{ env.TARGET_BRANCH }}
#          commit-message: "chore: sync template files"
#          include: |
#            .github
#            templates
#            .gitignore
#            .markdownlint.yaml
#            .editorconfig
#            .pre-commit-config.yaml
